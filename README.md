# AE4 World Map parser

This package is tested on Rust `v1.89.0`.

## Usage

```
cargo run
```

## Example output

```
Ok(
    (
        [],
        WorldMapFile {
            version: 1020,
            settings_count: 8,
            horizontal_width: 20,
            vertical_width: 15,
            chunk_width: 32,
            chunk_pow: 5,
            initial_position_x: 9,
            initial_position_y: 7,
            background_index: 27,
            use_background: 0,
            strings_count: 2,
            name: StdString {
                length: 9,
                data: "ワールド\0",
            },
            bg_path: StdString {
                length: 1,
                data: "",
            },
            tiles_types_count: 10,
            world_chip_data: [
                WorldChip {
                    header: 3,
                    tile_index: 0,
                    locked: 1,
                    graphic: 0,
                    strings_count: 2,
                    name: StdString {
                        length: 13,
                        data: "無\u{3000}移動不可\0",
                    },
                    unused_string: StdString {
                        length: 1,
                        data: "",
                    },
                },
                WorldChip {
                    header: 3,
                    tile_index: 1,
                    locked: 1,
                    graphic: 1,
                    strings_count: 2,
                    name: StdString {
                        length: 13,
                        data: "×\u{3000}移動不可\0",
                    },
                    unused_string: StdString {
                        length: 1,
                        data: "",
                    },
                },
                WorldChip {
                    header: 3,
                    tile_index: 2,
                    locked: 1,
                    graphic: 2,
                    strings_count: 2,
                    name: StdString {
                        length: 13,
                        data: "×\u{3000}移動不可\0",
                    },
                    unused_string: StdString {
                        length: 1,
                        data: "",
                    },
                },
                WorldChip {
                    header: 3,
                    tile_index: 3,
                    locked: 1,
                    graphic: 3,
                    strings_count: 2,
                    name: StdString {
                        length: 15,
                        data: "岩山\u{3000}移動不可\0",
                    },
                    unused_string: StdString {
                        length: 1,
                        data: "",
                    },
                },
                WorldChip {
                    header: 3,
                    tile_index: 4,
                    locked: 1,
                    graphic: 4,
                    strings_count: 2,
                    name: StdString {
                        length: 15,
                        data: "岩山\u{3000}移動不可\0",
                    },
                    unused_string: StdString {
                        length: 1,
                        data: "",
                    },
                },
                WorldChip {
                    header: 3,
                    tile_index: 5,
                    locked: 0,
                    graphic: 5,
                    strings_count: 2,
                    name: StdString {
                        length: 11,
                        data: "□\u{3000}移動可\0",
                    },
                    unused_string: StdString {
                        length: 1,
                        data: "",
                    },
                },
                WorldChip {
                    header: 3,
                    tile_index: 6,
                    locked: 0,
                    graphic: 6,
                    strings_count: 2,
                    name: StdString {
                        length: 11,
                        data: "○\u{3000}移動可\0",
                    },
                    unused_string: StdString {
                        length: 1,
                        data: "",
                    },
                },
                WorldChip {
                    header: 3,
                    tile_index: 7,
                    locked: 0,
                    graphic: 7,
                    strings_count: 2,
                    name: StdString {
                        length: 11,
                        data: "■\u{3000}移動可\0",
                    },
                    unused_string: StdString {
                        length: 1,
                        data: "",
                    },
                },
                WorldChip {
                    header: 3,
                    tile_index: 8,
                    locked: 0,
                    graphic: 8,
                    strings_count: 2,
                    name: StdString {
                        length: 11,
                        data: "●\u{3000}移動可\0",
                    },
                    unused_string: StdString {
                        length: 1,
                        data: "",
                    },
                },
                WorldChip {
                    header: 3,
                    tile_index: 9,
                    locked: 0,
                    graphic: 9,
                    strings_count: 2,
                    name: StdString {
                        length: 11,
                        data: "・\u{3000}移動可\0",
                    },
                    unused_string: StdString {
                        length: 1,
                        data: "",
                    },
                },
            ],
            tiles_count: 480,
            map_chip_data: [
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                6,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                6,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                6,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                6,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                6,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                6,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
            ],
            events_count: 2,
            event_data: [
                WorldEventBase {
                    header: 2,
                    placement_x: 9,
                    placement_y: 9,
                    strings_count: 1,
                    name: StdString {
                        length: 9,
                        data: "ステージ\0",
                    },
                    pages_count: 1,
                    pages: [
                        WorldEventPage {
                            start: 14,
                            event_type: 0,
                            graphic: 0,
                            world_number: 1,
                            pass_without_clear: 0,
                            play_after_clear: 1,
                            on_game_clear: 0,
                            appearance_condition_world: 0,
                            appearance_condition_variable: 0,
                            appearance_condition_constant: 0,
                            appearance_condition_comparison_content: 0,
                            appearance_condition_total_score: 0,
                            variation_setting_present: 0,
                            variation_variable: 1,
                            variation_constant: 0,
                            strings_count: 2,
                            world_name: StdString {
                                length: 11,
                                data: "全身タイツ\0",
                            },
                            start_stage: StdString {
                                length: 35,
                                data: ".\\data\\stg4\\StorySample01.stg4_966\0",
                            },
                        },
                    ],
                },
                WorldEventBase {
                    header: 2,
                    placement_x: 9,
                    placement_y: 12,
                    strings_count: 1,
                    name: StdString {
                        length: 9,
                        data: "ステージ\0",
                    },
                    pages_count: 1,
                    pages: [
                        WorldEventPage {
                            start: 14,
                            event_type: 0,
                            graphic: 0,
                            world_number: 2,
                            pass_without_clear: 0,
                            play_after_clear: 1,
                            on_game_clear: 0,
                            appearance_condition_world: 0,
                            appearance_condition_variable: 0,
                            appearance_condition_constant: 0,
                            appearance_condition_comparison_content: 0,
                            appearance_condition_total_score: 0,
                            variation_setting_present: 0,
                            variation_variable: 1,
                            variation_constant: 0,
                            strings_count: 2,
                            world_name: StdString {
                                length: 13,
                                data: "アツアツの塔\0",
                            },
                            start_stage: StdString {
                                length: 37,
                                data: ".\\data\\stg4\\StorySample02-1.stg4_966\0",
                            },
                        },
                    ],
                },
                WorldEventBase {
                    header: 2,
                    placement_x: 2,
                    placement_y: 0,
                    strings_count: 0,
                    name: StdString {
                        length: 1,
                        data: "",
                    },
                    pages_count: 9,
                    pages: [],
                },
                WorldEventBase {
                    header: 1703106691,
                    placement_x: 1468226433,
                    placement_y: 256,
                    strings_count: 3584,
                    name: StdString {
                        length: 0,
                        data: "",
                    },
                    pages_count: 0,
                    pages: [],
                },
                WorldEventBase {
                    header: 0,
                    placement_x: 0,
                    placement_y: 256,
                    strings_count: 0,
                    name: StdString {
                        length: 0,
                        data: "",
                    },
                    pages_count: 0,
                    pages: [],
                },
            ],
            events_pal_count: 0,
            event_template_data: [
                WorldEventBase {
                    header: 0,
                    placement_x: 0,
                    placement_y: 0,
                    strings_count: 256,
                    name: StdString {
                        length: 0,
                        data: "",
                    },
                    pages_count: 512,
                    pages: [
                        WorldEventPage {
                            start: 256,
                            event_type: 256,
                            graphic: 512,
                            world_number: 0,
                            pass_without_clear: 0,
                            play_after_clear: 256,
                            on_game_clear: 3840,
                            appearance_condition_world: 2196867584,
                            appearance_condition_variable: 2209977320,
                            appearance_condition_constant: 2170913624,
                            appearance_condition_comparison_content: 5735259,
                            appearance_condition_total_score: 1,
                            variation_setting_present: 14,
                            variation_variable: 0,
                            variation_constant: 1,
                            strings_count: 0,
                            world_name: StdString {
                                length: 1,
                                data: "",
                            },
                            start_stage: StdString {
                                length: 1,
                                data: "",
                            },
                        },
                    ],
                },
                WorldEventBase {
                    header: 0,
                    placement_x: 0,
                    placement_y: 0,
                    strings_count: 0,
                    name: StdString {
                        length: 0,
                        data: "",
                    },
                    pages_count: 0,
                    pages: [],
                },
                WorldEventBase {
                    header: 0,
                    placement_x: 1,
                    placement_y: 0,
                    strings_count: 2,
                    name: StdString {
                        length: 1,
                        data: "",
                    },
                    pages_count: 1,
                    pages: [],
                },
            ],
        },
    ),
)
```
